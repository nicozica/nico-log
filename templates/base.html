<!doctype html>
<html lang="es" data-theme="editorial">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#0b0f0e" />
    <title>{% if page_title %}{{ page_title }} · {% endif %}{{ site.title }}</title>
    <meta name="description" content="{{ site.description }}" />
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <link rel="icon" href="/favicon.svg" />
    <link rel="alternate" type="application/rss+xml" title="{{ site.title }} notas RSS" href="/notes/rss.xml" />
    <link rel="alternate" type="application/atom+xml" title="{{ site.title }} notas Atom" href="/notes/atom.xml" />
    <link rel="alternate" type="application/feed+json" title="{{ site.title }} Feed JSON" href="/notes/feed.json" />
    <script>
      (function () {
        try {
          var savedTheme = localStorage.getItem("portal-theme");
          if (savedTheme === "terminal" || savedTheme === "editorial") {
            document.documentElement.setAttribute("data-theme", savedTheme);
          }
        } catch (error) {
          // Ignore storage access issues and keep default theme.
        }
      })();
    </script>
    <link rel="stylesheet" href="/assets/css/main.css?v={{ build_id }}" />
    <link rel="stylesheet" href="/assets/css/terminal.css" />
    <script defer src="/assets/js/main.js?v={{ build_id }}"></script>
  </head>
  <body>
    <a class="skip-link" href="#content">Saltar al contenido</a>
    <header class="site-header">
      <div class="site-headline">
        <h1 class="site-title"><a href="/">{{ site.title }}</a></h1>
        {% if site.tagline %}
        <p class="site-subtitle">{{ site.tagline }}</p>
        {% endif %}
      </div>
      <nav class="site-nav" aria-label="Navegación principal">
        <a href="/" {% if current_path == '/' %}aria-current="page"{% endif %}>Inicio</a>
        <a href="/notes/" {% if current_path.startswith('/notes/') %}aria-current="page"{% endif %}>Notas</a>
        <a href="/links/" {% if current_path.startswith('/links/') %}aria-current="page"{% endif %}>Links</a>
        <a href="/now/" {% if current_path.startswith('/now/') %}aria-current="page"{% endif %}>Ahora sonando</a>
        <a href="/about/" {% if current_path.startswith('/about/') %}aria-current="page"{% endif %}>Acerca</a>
      </nav>
      <button id="theme-toggle" class="theme-toggle" type="button" aria-pressed="false" aria-label="Alternar modo terminal">
        Terminal
      </button>
    </header>

    <div class="status-bar" role="status" aria-live="polite">
      <span><strong>Actualizado:</strong> {{ build.updated_label }}</span>
      {% if status_summary.metrics_available %}
      <span><strong>Uptime:</strong> {{ status_summary.uptime_label }}</span>
      <span><strong>Temp CPU:</strong> {{ status_summary.cpu_temp_label }}</span>
      {% if status_summary.metrics_stale %}
      <span class="status-stale">(dato anterior)</span>
      {% endif %}
      {% endif %}
    </div>

    <main id="content" class="page-content">
      {% block content %}{% endblock %}
    </main>

    <footer class="site-footer">
      <section class="webring" aria-label="Anillo web">
        {% for link in footer.links %}
          <a href="{{ link.href }}" target="_blank" rel="noopener noreferrer">
            <span class="ring-label">enlace</span> {{ link.label }}
          </a>
        {% endfor %}
      </section>
      <p class="colophon">
        estático, cacheado, regenerado cada {{ site.regenerate_minutes }} min ·
        <a href="/notes/rss.xml">RSS</a> ·
        <a href="/notes/feed.json">Feed JSON</a> ·
        build: {{ build_id }}
      </p>
    </footer>
  </body>
</html>
